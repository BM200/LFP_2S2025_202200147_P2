<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test JavaBridge - Consola del Navegador</title>
</head>
<body>
    <h1>Test JavaBridge - Abre la Consola del Navegador (F12)</h1>
    <p>Este archivo prueba que todos los módulos funcionan correctamente en el navegador.</p>
    <p><strong>Instrucciones:</strong> Presiona F12 para abrir la consola y ver los resultados.</p>

    <!-- Cargar scripts en orden correcto -->
    <script src="js/lexico/TipoToken.js"></script>
    <script src="js/lexico/Token.js"></script>
    <script src="js/lexico/AnalizadorLexico.js"></script>
    
    <script src="js/sintactico/TablaSimbolos.js"></script>
    <script src="js/sintactico/AST.js"></script>
    <script src="js/sintactico/Parser.js"></script>
    
    <script src="js/traductor/Traductor.js"></script>
    
    <script src="js/reportes/GeneradorHTML.js"></script>

    <script>
        console.log('═══════════════════════════════════════════════════');
        console.log('  TEST JAVABRIDGE - NAVEGADOR');
        console.log('═══════════════════════════════════════════════════\n');

        // Código Java de prueba
        const codigoJava = `public class Prueba {
    public static void main(String[] args) {
        int x = 10;
        int y = 20;
        int suma = x + y;
        
        System.out.println("Suma:");
        System.out.println(suma);
        
        if (suma > 25) {
            System.out.println("Mayor");
        }
    }
}`;

        console.log('1️⃣ Código Java de entrada:\n');
        console.log(codigoJava);
        console.log('\n───────────────────────────────────────────────────\n');

        // FASE 1: Léxico
        console.log('2️⃣ ANÁLISIS LÉXICO\n');
        const lexico = new AnalizadorLexico(codigoJava);
        const resultadoLexico = lexico.analizar();
        console.log(`✅ Tokens: ${resultadoLexico.tokens.length}`);
        console.log(`✅ Errores léxicos: ${resultadoLexico.errores.length}`);
        console.log('Primeros 10 tokens:', resultadoLexico.tokens.slice(0, 10));
        console.log('\n───────────────────────────────────────────────────\n');

        // FASE 2: Sintáctico
        console.log('3️⃣ ANÁLISIS SINTÁCTICO\n');
        const parser = new Parser(resultadoLexico.tokens);
        const resultadoParser = parser.parse();
        console.log(`✅ Análisis ${resultadoParser.exito ? 'EXITOSO' : 'CON ERRORES'}`);
        console.log(`✅ Errores sintácticos: ${resultadoParser.errores.length}`);
        console.log('AST:', resultadoParser.ast);
        console.log('\n───────────────────────────────────────────────────\n');

        // FASE 3: Traducción
        console.log('4️⃣ TRADUCCIÓN A PYTHON\n');
        const traductor = new Traductor(resultadoParser.ast, resultadoParser.tablaSimbolos);
        const resultadoTraduccion = traductor.traducir();
        console.log(`✅ Traducción ${resultadoTraduccion.exito ? 'EXITOSA' : 'CON ERRORES'}`);
        console.log(`✅ Errores: ${resultadoTraduccion.errores.length}`);
        console.log('\n🐍 Código Python generado:\n');
        console.log(resultadoTraduccion.codigo);
        console.log('\n───────────────────────────────────────────────────\n');

        // RESUMEN
        console.log('═══════════════════════════════════════════════════');
        console.log('  RESUMEN FINAL');
        console.log('═══════════════════════════════════════════════════');
        console.log(`✅ Tokens: ${resultadoLexico.tokens.length}`);
        console.log(`✅ Errores léxicos: ${resultadoLexico.errores.length}`);
        console.log(`✅ Errores sintácticos: ${resultadoParser.errores.length}`);
        console.log(`✅ Errores de traducción: ${resultadoTraduccion.errores.length}`);
        
        const todoOk = resultadoLexico.errores.length === 0 && 
                       resultadoParser.errores.length === 0 && 
                       resultadoTraduccion.errores.length === 0;
        
        console.log(`\n${todoOk ? '🎉 ¡ÉXITO TOTAL!' : '⚠️ HAY ERRORES'}`);
        console.log('═══════════════════════════════════════════════════');

        // Hacer disponibles globalmente para inspección
        window.testJavaBridge = {
            lexico: resultadoLexico,
            parser: resultadoParser,
            traduccion: resultadoTraduccion
        };

        console.log('\n💡 TIP: Puedes inspeccionar los resultados con:');
        console.log('   window.testJavaBridge.lexico');
        console.log('   window.testJavaBridge.parser');
        console.log('   window.testJavaBridge.traduccion');
    </script>
</body>
</html>
